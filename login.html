<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso Pamy's</title>
    <link href="https://fonts.googleapis.com/css2?family=Epunda+Slab:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="login-page">

    <div class="login-card">
        <div class="login-header">
            <h1 class="brand" style="color:var(--primary); font-size:2.5rem; margin-bottom: 5px;">Pamy's</h1>
            <p>¡Bienvenido de nuevo!</p>
        </div>
        
        <div class="auth-tabs">
            <div class="tab active" onclick="switchTab('login')">Ingresar</div>
            <div class="tab" onclick="switchTab('register')">Crear Cuenta</div>
        </div>

        <div id="login-form" class="auth-form active">
            <div class="input-group">
                <i class="fas fa-user"></i>
                <input type="text" id="login-user" placeholder="Usuario" class="form-input">
            </div>
            <div class="input-group">
                <i class="fas fa-lock"></i>
                <input type="password" id="login-pass" placeholder="Contraseña" class="form-input">
            </div>
            <button class="btn-add" onclick="login()">
                Entrar <i class="fas fa-arrow-right"></i>
            </button>
        </div>

        <div id="register-form" class="auth-form">
            <div class="input-group">
                <i class="fas fa-user-plus"></i>
                <input type="text" id="reg-user" placeholder="Nuevo Usuario" class="form-input">
            </div>
            <div class="input-group">
                <i class="fas fa-key"></i>
                <input type="password" id="reg-pass" placeholder="Crear Contraseña" class="form-input">
            </div>
            <button class="btn-add" onclick="register()">
                Registrarme <i class="fas fa-check"></i>
            </button>
        </div>

        <div style="margin-top: 20px; text-align: center;">
            <a href="index.html" style="color: #999; text-decoration: none; font-size: 0.9rem;">
                <i class="fas fa-home"></i> Volver al inicio
            </a>
        </div>
    </div>

    <script>
        // Lógica simple para Login (igual a la que tenías, solo adaptada visualmente)
        const defaultUsers = [{ user: 'admin', pass: '1234', role: 'admin' }];

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));

            if(tab === 'login') {
                document.querySelectorAll('.tab')[0].classList.add('active');
                document.getElementById('login-form').classList.add('active');
            } else {
                document.querySelectorAll('.tab')[1].classList.add('active');
                document.getElementById('register-form').classList.add('active');
            }
        }

        function register() {
            const u = document.getElementById('reg-user').value;
            const p = document.getElementById('reg-pass').value;
            if(!u || !p) return alert("Por favor llena todos los datos");

            let users = JSON.parse(localStorage.getItem('usersPamys')) || defaultUsers;
            if(users.find(x => x.user === u)) return alert("El usuario ya existe");

            users.push({ user: u, pass: p, role: 'client' });
            localStorage.setItem('usersPamys', JSON.stringify(users));
            alert("¡Cuenta creada! Por favor inicia sesión.");
            switchTab('login');
        }

        function login() {
            const u = document.getElementById('login-user').value;
            const p = document.getElementById('login-pass').value;
            let users = JSON.parse(localStorage.getItem('usersPamys')) || defaultUsers;
            
            const found = users.find(x => x.user === u && x.pass === p);
            if(found) {
                localStorage.setItem('role', found.role);
                if(found.role === 'admin') window.location.href = 'admin.html';
                else window.location.href = 'index.html';
            } else {
                alert("Usuario o contraseña incorrectos");
            }
        }
    </script>
</body>
</html>